FORMAT: 1A

# IMP North: Ready

# Introduction

This is a description of rest interfaces ready to be implemented in IMP.

# Group Journey Planner. IMR. 1:n Extension
This is a group of all IMR 1:n journey planner related rest resources

## List of 1:n Trip Proposals. Intermodal Router [/imp-endpoint/api/V1/TripProposals/IMR] 

This collection contains list of trip proposals for 1:n routing with information about tip costs (duration, price and distance) and an URL to request more details about the trip.
Notes:
- criteria for selection of tripproposal are specified in the request body
- start location is in all trip proposals the same, destination is in every proposal different.
- the trip proposals can be multimodal or intermodal, depending on which routing service the user is subscribed to.

The data structure of collection contains a list of trip proposals. Each trip proposal contains the following attributes:

attribute | json data type | comments
--- | --- | ---
url | URI | URI to request more details about a specific route
origin | Object | timed start point of the trip
destination | Object | timed end point of the trip
trafficTypes | Array | list of traffic types used in the proposed trip  
description | String | 
costs | Array | list of costs for the proposed trip

    
+ Model (application/json)

    + Body
    
            [
              {
                "url": "TripProposals/IMR/64316?",
                "origin": "timed start location in GEOJson Format",
                "destination": "timed end location1 in GEOJson Format",
                "trafficTypes": [
                  "Walk",
                  "Car",
                  "Bike"
                ],
                "description": null,
                "costs": {
                  "distance": {
                    "unit": "Meter",
                    "value": 28537.5323005797
                  },
                  "duration": {
                    "unit": "Minute",
                    "value": 100.01666666666667
                  },
                  "price": {
                    "unit": "Euro",
                    "value": 3.0
                  },
                  "emission": {
                    "unit": "Gram",
                    "value": 0
                  }
                }
              },
              {
                "url": "TripProposals/IMR/64317?",
                "origin": "timed start location in GEOJson Format",
                "destination": "timed end location2 in GEOJson Format",
                "trafficTypes": [
                  "Walk",
                  "Other",
                  "Bike"
                ],
                "description": null,
                "costs": {
                  "distance": {
                    "unit": "Meter",
                    "value": 28517.5049830481
                  },
                  "duration": {
                    "unit": "Minute",
                    "value": 102.05
                  },
                  "price": {
                    "unit": "Euro",
                    "value": 2.1
                  },
                  "emission": {
                    "unit": "Gram",
                    "value": 0
                  }
                }
              }

            ]


# Group Journey Planner. Car Router. 1:n Extension
This is a group of all journey planner Car Router related rest resources.
            
## List of Trip Proposals with Basic Info. Car Journey Planner [/imp-endpoint/api/V1/TripProposals/CarRouter] 

This collection contains trip proposals for 1:n routing with basic information about tip costs (duration, price and distance) and an URL to request more details about the trip.
Note: start location is in all trip proposals the same, destination can be different (1:n routing)

attribute | json data type | comments
--- | --- | ---
url | URI | URI to request more details about a specific route
origin | Object | timed start point of the proposed trip
destination | Object | timed endpoint of the proposed trip
trafficTypes | Array | list of traffic types used in the proposed trip. Currently: Bike, Car, Walk, Other, Unknown. trafficType Other is used in the segments for car rental/parking  
description | String | 
costs | Array | list of costs for the proposed trip

    
+ Model (application/json)

    + Body
    
            [
                {
                    "url": "TripProposals/CarRouter/1",
                    "origin": "timed start location in GEOJson Format",
                    "destination": "timed dest1 in GEOJson Format",
                    "trafficTypes": [
                        "Car"
                    ],
                    "description": null,
                    "costs": {
                        "distance": {
                            "unit": "Kilometer",
                            "value": 3
                        },
                        "duration": {
                            "unit": "Minute",
                            "value": 30
                        },
                        "price": {
                            "unit": "Cent",
                            "value": 20
                        }
                        "emission": null,
                    }
                },
                {
                    "url": "TripProposals/CarRouter/2",
                    "origin": "timed start location in GEOJson Format",
                    "destination": "timed dest2 in GEOJson Format",
                    "trafficTypes": [
                        "Car"
                    ],
                    "description": null,
                    "costs": {
                        "distance": {
                            "unit": "Kilometer",
                            "value": 5
                        },
                        "duration": {
                            "unit": "Minute",
                            "value": 20
                        },
                        "price": {
                            "unit": "Cent",
                            "value": 15
                        },
                        "emission": null,
                    }
                }
            ]


### Getting Trip Proposals from one location to n other locations by IMR Planner [GET]
@nottestable

Selection criteria is specified in the request body as described in the sample request:
- origin: start point. list of locations in GEOJson Format possible but expected only one as start n:n routing
- destination: lend point. list of locations in GEOJson Format
- reverseDirection: bool, if true destinaiton->origin, else origin -> destination. default value is false
- time: time of departure or destination
- isDepartureTime:  if true -> time = departure time, if false -> time = arrival time. default value is true.

- viaPoints: list of geo locations that the route should use
- costFunction: list of cost factors (such as Distance, Duration, Price, Emission), each with a percentual weight 
- routingConstraints: list of constraints to be taken into account for various traffic types, specified by min/max values
- userId: user that requests a trip

+ Request

    + Headers
    
            Content-Type: application/json
            Accept: application/json

    + Body
        
            {
                  "origin": "start location in GEOJson Format",
                  "destination": {
                    "dest1 in GEOJson Format",
                    "dest2 in GEOJson Format"
                    }
                  "reverseDirection": "false"
                  "time": "2014-11-27T12:04:02UTC+05:30",
                  "isDepartureTime": "true",
                  "viaPoints": [],
                  "costFunctions": [],
                  "userId": "4711/10",
                  "routingConstraints": []
            }

+ Response 200 

    [List of Trip Proposals with Basic Info. Car Journey Planner][]


# Group Billing
This is a group of all rest resources related to IMP billing service.
IMP offers this REST interface to its Partner (Service Providers and Mobility Providers) to provide billable events to IMP in order to use its billing functionality. Partners can provide events to IMP, but can't retrieve them.
IMP uses this REST interface internally to create IMP BillableEvents and retrieve them for internal purposes.

## BillableEvent [/imp-endpoint/api/V1/Billing/BillableEvents/{id}]
One billable event. Can be a single time event (Buying a Ticket) or a event with end and start time (enter parking lot & exit parking lot)

The data structure of a billable event has the following attributes:

attribute | json data type | comments
--- | --- | ---
id | String | id of the event. (auto generated value)
uri | String | URI of the resource "Billing/BillableEvents/1"
eventTimestamp | String | Timestamp when this event occurred in ISO 8601 format: YYYY-MM-DDThh:mm:ssTZD (eg 1997-07-16T19:20:30+01:00) (mandatory)
userId | String | Id of customer to whom this event shall be accounted to (mandatory). NOTE: This can be id of a traveler, of a mobilitly provider, or a combined id, e.g. mp1_traveller2
extUserId | String | External Id of customer to whom this event shall be accounted (optional). NOTE: this field can be used as traveler id.
transactionId | String | Unique id of a transaction this event belongs to (optional) Example usage: both events "enter parking" & "exit parking" would have the same transaction id
productCode | String | This code determines the consumed product and has to correlate with the defined product in the billing system (mandatory)
productName | String | Readable public name of the productCode (optional)
vendorId | String | Id of entity that created this event (mandatory) NOTE: this can be MP_ID, SP_ID, or IMP
quantity | Float | Quantity of consumption (optional)
quantityType | String | Type of consumed quantity (e.g. units, seconds, kilometers, liters, …) (optional)
price | Float | Price of this event. If this field is filled the event is considered as already rated (optional)
currency | String | Currency code according to ISO 4217 for currency conversion purposes. Default: EUR
serviceCategory | String | Category of the service eg. Parking, CarSharing, etc. (optional)
serviceId | String | Id of the service that has been used to create this event (optional). One serviceProvider can offer different services (offerings) identified by this id.
serviceProviderId | String | Id of the service provider (mandatory). NOTE: this field is SP_ID
quota | Object | optional object used in case of more complex event & price models. (optional) Note: if this field exists, "price" and "quantity" are overridden. 

The data structure of the quota object:

attribute | json data type | comments
--- | --- | ---
quotaType | String | Defines the type of the quota. This shall be used in order to correctly cast the quota attributes. (mandatory)
duration | long | A time dimension. Default unit: millis (optional)
startTimestamp | String | Start of the duration. Timestamp in ISO 8601 format (eg 1997-07-16T19:20:30+01:00) (optional)
endTimestamp | long | End of the duration. Timestamp in ISO 8601 format (eg 1997-07-16T19:20:30+01:00) (optional)
startLatLng | Object | Start of distance measuring. Geoposition in format specified as Point conform to the following GeoJSON Format Specification: http://geojson.org/geojson-spec.html (optional)
endLatLng | Object | End of distance measuring. Geoposition in format specified as Point conform to the following GeoJSON Format Specification: http://geojson.org/geojson-spec.html (optional)
distance | Float | Distance in distance units determined by unit type
distanceUnit | String | Unit for distance (sample: meters, TODO: is there a norm?)
units | Float | Generic quota field (optional)
unitType | String | Determines unit type of the quota (meters, kg, hours, …) Default: meters (optional)
namedEvent | String | Any kind of additional identification or description (optional)


+ Model (application/hal+json)
    
        {
            "id": 1,
            "uri": "Billing/BillableEvents/1",
            "eventTimestamp": "1997-07-16T19:20:30+01:00",
            "userId": "traveller_1",
            "extUserId": "cust1234",
            "transactionId": "transact1",
            "productCode": "single fare",
            "productName": "Ticket",
            "vendorId": "100",
            "quantity": 1.0,
            "quantityType": "ticket",
            "price": 2.6,
            "currency": "EUR",
            "serviceCategory" : "Ticketing",
            "serviceId": "handyticket:consume",
            "serviceProviderId": "HandyTicket",
            "quota": null
        }

### Retrieve a single billable event [GET]
@nottestable
Note: For internal IMP use only!

+ Parameters
    + id (string, `111`) ... an event id

+ Response 200
        [BillableEvent][]
  
     

## BillableEvents Collection [/imp-endpoint/api/V1/Billing/BillableEvents?userId={userId}&serviceProviderId={serviceProviderId}&startDate={date1}&endDate={date2}]  
A list of billable events happened in the specified date slot and filtered by userId (can be traveler id, mobility provider id or combined id "mp1_traveler2") or by serviceProviderIds.
In case no filters were specified, the last x items should be returned.

Idea: Ids chain through MP->IMP->SP is realized as follows: a traveler at MP with `travelerId`, a MP at IMP with `mpId`, so the traveller at IMP with `mpId_travelerId`
All BillableEvents (produced in IMP) contain attribute userId in form `mpId_travelerId`, billableEvents provided by MPs, or SPs can provide different id schema

Note: userToken is used in header to check the rights to see billable events. Currently GET methods are planned for internal IMP use only.

+ Model (application/hal+json)

        [
            {
                "id": 1,
                "uri": "Billing/BillableEvents/1",
                "eventTimestamp": "2014-07-16T19:20:30+01:00",
                "userId": "traveller_1",
                "extUserId": "cust1234",
                "transactionId": "transact1",
                "productCode": "single fare",
                "productName": "Ticket",
                "vendorId": "100",
                "quantity": 1.0,
                "quantityType": "ticket",
                "price": 2.6,
                "currency": "EUR",
                "serviceCategory" : "Ticketing",
                "serviceId": "htTicketing",
                "serviceProviderId": "handyTicket",
                "quota": null
            },
            {
                "id": 2,
                "uri": "Billing/BillableEvents/2",
                "eventTimestamp": "2014-09-16T19:20:30+01:00",
                "userId": "traveller_2",
                "extUserId": "cust12345",
                "transactionId": "transact2",
                "productCode": "car park",
                "productName": "Parking Isartor",
                "vendorId": "100",
                "quantity": 48,
                "quantityType": "minutes",
                "price": 4,
                "currency": "EUR",
                "serviceCategory" : "Parking",
                "serviceId": "vmzParking",
                "serviceProviderId": "vmz",
                "quota": null
            }
        ]


### List all BillableEvents [GET]
@nottestable
Note: for internal IMP use only.

+ Parameters
    + userId (string, `mp1_traveler2`) ... Id of a user to whom events shall be accounted to. Has example value.   
    + serviceProviderId (string, `sp1`) ... Id of service provider. Has example value.   
    + date1 (required, string, `1410307200000`) ... start date in the history or in the future. Has example value. If the start and end dates are not specified the last month is taken.
    + date2 (required, string, `1418169600000`) ... end date in the history or in the future. Has example value.
    
+ Request

    + Headers
        
            userToken: {someTokenToCheckAuthentification} 
            
+ Response 200

    [BillableEvents Collection][]

## BillableEvents Collection [/imp-endpoint/api/V1/Billing/BillableEvents]  
    
### Create one or multiple BillableEvents [POST]
@nottestable
Can be used to post one or multiple events in one call. Note: Response is 201 with a list of URLs of created resources as content!

+ Request (application/json)

        [
            {
                "eventTimestamp": "2014-07-16T19:20:30+01:00",
                "userId": "traveller_1",
                "extUserId": "cust1234",
                "transactionId": "transact1",
                "productCode": "single fare",
                "productName": "Ticket",
                "vendorId": "100",
                "quantity": 1.0,
                "quantityType": "ticket",
                "price": 2.6,
                "currency": "EUR",
                "serviceCategory" : "Ticketing",
                "serviceId": "htTicketing",
                "serviceProviderId": "handyTicket",
                "quota": null
            },
            {
                "eventTimestamp": "2014-09-16T19:20:30+01:00",
                "userId": "traveller_2",
                "extUserId": "cust12345",
                "transactionId": "transact2",
                "productCode": "car park",
                "productName": "Parking Isartor",
                "vendorId": "100",
                "quantity": 48,
                "quantityType": "minutes",
                "price": 4,
                "currency": "EUR",
                "serviceCategory" : "Parking",
                "serviceId": "vmzParking",
                "serviceProviderId": "vmz",
                "quota": null
            }
        ]


+ Response 201

        [
            {"uri": "Billing/BillableEvents/1"},
            {"uri": "Billing/BillableEvents/2"}
        ]
  
  
# Group Billing Invoices Draft
This is just a first draft! Not yet ready for implementation!

## Invoice [/imp-endpoint/api/V1/Billing/Invoices/{id}]
The invoice API is still under discussion! This is a first draft!
One invoice! Invoice lists all billable events together with price.

The data structure of the response has the following attributes:

attribute | json data type | comments
--- | --- | ---
invoiceId | String | 
billableEvents | List of BillableEvents | 
totalPrice | Number | 
unit | String | EUR


+ Model (application/hal+json)
    
        {
            "invoiceId": "1",
            "billableEvents":
            [
              {
                "eventId": 1,
                "eventTimestamp": 1410527427084,
                "extUserId": "cust1234",
                "price": 2.6,
                "productCode": "single fare",
                "productName": "Ticket",
                "quantity": 1.0,
                "quantityType": "ticket",
                "quota": {
                  "distance": 50,
                  "quotaId": 0,
                  "quotaType": "distance",
                  "unitType": "meters"
                },
                "serviceId": 1,
                "serviceProviderId": 1,
                "transactionId": 1,
                "userId": "henry@simobility.com",
                "vendorId": "100"
              },
              {
                "eventId": 2,
                "eventTimestamp": 1410527429084,
                "extUserId": "cust9999",
                "productCode": "car park",
                "productName": "Parking Isartor",
                "quantity": 48.0,
                "quantityType": "time_minutes",
                "quota": {
                  "duration": "45",
                  "quotaId": 1,
                  "quotaType": "duration",
                  "unitType": "minutes"
                },
                "serviceId": 1,
                "serviceProviderId": 2,
                "transactionId": 1,
                "userId": "martha@simobility.com",
                "vendorId": "200"
              }
            ]
          }

### Retrieve a single invoice [GET]
@nottestable

+ Parameters
    + id (string, `1`) ... invoice id

+ Response 200
        [Invoice][]

## Invoices Collection [/imp-endpoint/api/V1/Billing/Invoices?userId={userId}&spId={serviceProviderId}&startDate={date1}&endDate={date2}]  
Invoices created the specified date slot. userId or spId (or both) can be specified to filter events.

Note: userToken is used to check the right to see billable events!

+ Model (application/hal+json)

        [
            "invoice" : {
                "invoiceId": "1",
                "billableEvents":
                [
                  {
                    "eventId": 1,
                    "eventTimestamp": 1410527427084,
                    "extUserId": "cust1234",
                    "price": 2.6,
                    "productCode": "single fare",
                    "productName": "Ticket",
                    "quantity": 1.0,
                    "quantityType": "ticket",
                    "quota": {
                      "distance": 50,
                      "quotaId": 0,
                      "quotaType": "distance",
                      "unitType": "meters"
                    },
                    "serviceId": 1,
                    "serviceProviderId": 1,
                    "transactionId": 1,
                    "userId": "henry@simobility.com",
                    "vendorId": "100"
                  },
                  {
                    "eventId": 2,
                    "eventTimestamp": 1410527429084,
                    "extUserId": "cust9999",
                    "productCode": "car park",
                    "productName": "Parking Isartor",
                    "quantity": 48.0,
                    "quantityType": "time_minutes",
                    "quota": {
                      "duration": "45",
                      "quotaId": 1,
                      "quotaType": "duration",
                      "unitType": "minutes"
                    },
                    "serviceId": 1,
                    "serviceProviderId": 2,
                    "transactionId": 1,
                    "userId": "martha@simobility.com",
                    "vendorId": "200"
                  }
                ]
            }
            "invoice" : {
                "invoiceId": "2",
                "billableEvents":
                [
                    {
                        "eventId": 66,
                        "eventTimestamp": 1410527429084,
                        "extUserId": "cust9999",
                        "productCode": "car park",
                        "productName": "Parking Isartor",
                        "quantity": 48.0,
                        "quantityType": "time_minutes",
                        "quota": {
                          "duration": "20",
                          "quotaId": 1,
                          "quotaType": "duration",
                          "unitType": "minutes"
                        },
                        "serviceId": 1,
                        "serviceProviderId": 2,
                        "transactionId": 1,
                        "userId": "oxana@simobility.com",
                        "vendorId": "200"
                    }
                ]
            }
        ]

### List all Invoices [GET]
@nottestable

+ Parameters
    + userId (optional, string, `mp1_`) ... Id of customer to whom events shall be accounted to. can be a traveller, can be a mp with all his travellers. Has example value.   
    + spId (optional, string, `sp1`) ... Id of service provider who wants to see events about its service usage independand of customers. Has example value.   
    + date1 (optional, string, `1410307200000`) ... start date in the history or in the future. Has example value.
    + date2 (optional, string, `1418169600000`) ... end date in the history or in the future. Has example value.
    
+ Request

    + Headers
        
            userToken: {someTokenToCheckAuthentification} 
            
+ Response 200

    [Invoices Collection][]

### Create an Invoice [POST]
@nottestable

+ Request (application/json)

        {
            "startDate": "2014-07-10T14:23:11+0200",
            "endDate": "2014-08-10T14:23:11+0200"
            "userId": "mp1_traveler3_is_optional?",
            "spId": "driveNow_is_optional?"
        }

+ Response 201
    
    [Invoice][]  

        
# Group Heatmap
This is a group of all rest resources related to heatmap as PNG file. Heat map is a graphical representation of data where the individual values are represented as colors
Currently it is planned to be used to represent service categories: CarSharing, BikeSharing, Taxi Services

## TaxiService Demand Heatmap [/imp-endpoint/api/V1/Info/Heatmap/TaxiService/Demand?startDate={date1}&endDate={date2}&left_lower_lat={lllat}&left_lower_lng={lllng}&right_upper_lng={rulng}&right_upper_lat={rulat}&width={wdval}&height={htval}]  
Get WMS PNG file displaying Taxi Service Demand as a heatmap for a date slot and for a specific bounding box (place).
Note: Currently the returned image with dots represent events taking place in the specific area.

### Getting taxi service heatmap as PNG image [GET]
@nottestable

+ Parameters
    + date1 (required, string, `1410307200000`) ... start date in the history or in the future. Has example value.
    + date2 (required, string, `1418169600000`) ... end date in the history or in the future. Has example value.
    + lllng (required, string, `13.030338`) ...   
    + lllat (required, string, `52.38294`) ... 
    + rulng (required, string, `13.556067`) ... 
    + rulat (required, string, `52.638559`) ... 
    + width (required, string, `612`) ... the width of the heatmap
    + height (required, string, `512`) ... the height of the heatmap
    
+ Request

    + Headers
        
            accept: image/png 

+ Response 200 (image/png)

    + Body
    
            �PNG

## BikeSharing Heatmap [/imp-endpoint/api/V1/Info/Heatmap/BikeSharing?date={x}&left_lower_lat={lllat}&left_lower_lng={lllng}&right_upper_lng={rulng}&right_upper_lat={rulat}&operatorList={operatorList}]    
Get WMS PNG file for carsharing for a specific date, a specific bounding box (place) and for specific free-floating bikeSharing providers (NextBike, etc.)

### Getting heatmap as PNG image [GET]

+ Parameters
    + date (required, string, `1404892800000`) ... a date in the history (later also in the future) Has example value.
    + lllat (required, string, `52.482780222078205`) ... 
    + lllng (required, string, `13.3154296875`) ...     
    + rulng (required, string, `13.359375`) ... 
    + rulat (required, string, `52.50953477032729`) ... 
    + operatorList (optional, string, `NextBike,CallABike`) comma-separated list of BikeSharing operator ids. If not specified -> returns image for all available _BikeSharing_ operators

+ Request

    + Headers
        
            accept: image/png 

+ Response 200 (image/png)

    + Body
    
            �PNG



# Group Parking
This is a group of all parking related rest resources. Parking Garages & On-street Parking Vacancies

## On-street Parking Vacancies with Basic Info [/imp-endpoint/api/V1/Resources/Parking/OnStreetVacancies?lat={lat}&lng={lng}&radius={radius}?length={length}&width={width}&unit={unit}]    
This collection contains a list of all on-street vacansies in an area of interest specified by query parameters together with an URI to acquire more details about a specific vacancy.
TODO: the list contains only vacancies (FREE parking spots, no OCCUPIED parking spots!)
Note: The area of interest can be defined as:

* a bounding circle (lat={lat}&lng={lng}&radius={radius})
* a bounding box (left_lower_lat={min_lat}&left_lower_lng={min_lng}&right_upper_lat={max_lat}&right_upper_lng={max_lng})

The If-Modified-Since (optional) can be set to a specific date-time in order to request only resources modified after a particular date-time.
Date time in HTTP date format for e.g. Wed, 09 Apr 2008 23:55:38 GMT
TODO: Does not make sense now, but maybe in the future..

The data structure of the response contains the following attributes:

attribute | json data type | comments
--- | --- | ---
metadata | Object | List of service providers and the last update times and failures if any [{serviceAlias:"XXX",lastUpdateTime:dd-mm-yyyyThhmmssZ,messages:[]}]
--- | --- | ---
resources | Array | Array of resources within the search area
--- | --- | ---
actions | Array | List of available actions on this resource (currently empty, in the future can be subscribe for changes...)
id | Number | Internal parking spot identification number
description | String | description
type | String | (="OnStreetParkingVacancy" or similar) TODO
uri | URI | URI to request more details
location | Object | Standard WGS 84 for polar coordinates { "latitude":Number, "longitude":Number, "system": ENUM{"WGS_84","GK4","ETRS89",...}  } 
provider | String | Parking service provider (usually equals operator)
operator | String | Parking space operator (usually equals provider)
category | ENUM | public, resident, handicapped

TODO: The following parameters are available in parking garages and should be discussed if they make sense in parking vacancies:

attribute | json data type | comments
--- | --- | ---
availability | Double | Availability in percentage
totalnumber | Object | Number of lots for different categories { "handicappedOnly":Int, "womenOnly":Int, "others":Int }
lottype | Enum | Type of garage {"Parkhaus", "Parkzone", "Tiefgarage", "Parkplatz"} 
modFlag | Enum | Type of modification to resource [New / Modified / Relocated / Deleted]. This attribute is present only when the If-Modified-Sinceodified-Since header is passed in the request 

Parts of the data structure might be omitted if the information is not available. 
    
### Getting on-street parking vacancies [GET]
@nottestable

+ Parameters
    + lat (string, `52.52`) ... String `lat` latitude value. Has example value.
    + lng (string, `13.39`) ... String `lng` longitude value. Has example value.
    + radius (string, `1000`) ... String `radius` radius value. Has example value.
    + length (optional, string, `5`) ... String `length` required length value (car size). Has example value. If not defined a default value is used
    + width (optional, string, `2.5`) ... String `width` required width value (car size). Has example value. If not defined a default value is used
    + unit (optional, string, `m`) ... String `unit` measurement unit for the size value. Has example value. If not defined a default value is used
    
+ Request

    + Headers
    
            If-Modified-Since: Wed, 09 Apr 2008 23:55:38 GMT 
        
+ Response 200 (application/json)   

        {
            "metaData": [
                {
                    "serviceAlias": "city2.e??",
                    "lastUpdateTime": "2014-07-10T11:11:04+0200",
                    "messages": []
                }
            ],
            "resources": [
                {
                    "actions": [],
                    "id": 270113,
                    "description": "Some description",
                    "type": "OnStreetParkingVacancy",
                    "uri": "Resources/Parking/OnStreetVacancies/270113",
                    "location": {
                        "latitude": 52.51908,
                        "longitude": 13.39094,
                        "system": "WGS_84"
                    },
                    "provider": "city2.e..",
                    "operator": "city2.e..",
                    "category": "handicapped"
                }
            ]
        }

## Parking Vacancy with Detailed Info [/imp-endpoint/api/V1/Resources/Parking/OnStreetVacancies/{id}]

A single parking vacancy object with Detailed Information. 
The data structure of the response contains the attributes with the basic information and additionally the following attributes:

attribute | json data type | comments
--- | --- | ---
... | ... | ...
pricing | String | Price structure 
payment | Array | Payment options {COINPAY, BANKNOTEPAY, BANKCARDPAY, CREDICARDPAY, PREPAIDCARDPAY, PAYCARDPAY, DEBITPAY}
bookable | Boolean |  
allowedStay | Object | Allowed stay { "value": Number, "unit": String } 
restrictions | Array | Usage restrictions {"VisitorsOnly","GuestsOnly"}
services | Array | Special services { "WomenParking", "DisabledParking", "Monitored", "ChargingStation", "ParentChild", "MotorCycle", ... } 
securityComment | String |  Securtiy features

### Getting a specific parking vacancy [GET] 
@nottestable

+ Parameters
    + id (string, `8367`) ... String `id` as retrieved through *[/imp-endpoint/api/V1/Resources/Parking/OnStreetVacancies?lat={lat}&lng={lng}&radius={radius}]*

+ Response 200 (application/json) 

        {
            "actions": [],
            "id": 271366,
            "description": "Some description",
            "type": "OnStreetParkingVacancy",
            "uri": "Resources/Parking/OnStreetVacancies/270113",
            "location": {
                "latitude": 52.51908,
                "longitude": 13.39094,
                "system": "WGS_84"
            },
            "provider": "city2.e..",
            "operator": "city2.e..",
            "category": "handicapped",
            "pricing": "2,00 EUR für die 1. Std. <br>2. und 3. Stunde 1,50 Euro<br>je weiter Stunde 1,00 Euro<br>Tagespreis 15,00 Euro<br>Monatspreis 100,00 Euro",
            "payment": [
                "BANKNOTEPAY",
                "COINPAY"
            ],
            "bookable": false,
            "allowedStay": null,
            "restrictions": null,
            "services": null,
            "securityComment": null
        }


# Group Routing
This is a group of all routing related rest resources. Currently, we use this place to 
define a 1:n routing interface that we might need for the VBB project.

## get trip proposals [/imp-endpoint/api/V1/TripProposals/RouteProperties]   
This is the endpoint for 1:n routing.

+ Request

    + Headers

            Accept: application/json
            Content-Type: application/json

    + Body
    
            {
                "origin":{
                    "type": "Point", "coordinates": [13.074760, 52.393300]
                },
                "destinations":{
                    "type": "LineString", "coordinates": [[13.000, 52.000],[13.111, 52.222],[13.333, 52.444]]
                },
                "costFunctions": [
                {
                    "percentage": 100,
                    "costType": "Duration"
                },
                "trafficTypes": [
                    "Walk",
                    "Bike",
                    "Car",
                    "Metro",
                    "CityTrain",
                    "Bus"
              ]
            }
            
+ Response
    
    + Headers
    
            Content-Type: application/json

    + Body
    
            [
                {
                    "url": "TripProposals/IMR/80812",
                    "origin": {
                        "location": {
                            "latitude": 52.39339065551758,
                            "longitude": 13.07505989074707,
                            "system": "WGS_84"
                        },
                        "address": null,
                        "time": "2014-03-27T10:23:12+0100"
                    },
                    "destination": {
                        "location": {
                            "latitude": 52.52581024169922,
                            "longitude": 13.369529724121094,
                            "system": "WGS_84"
                        },
                        "address": null,
                        "time": "2014-03-27T11:04:12+0100"
                    },
                    "trafficTypes": [
                        "Car"
                    ],
                    "description": null,
                    "costs": {
                        "distance": {
                            "unit": "Meter",
                            "value": 35433
                        },
                        "duration": {
                            "unit": "Minute",
                            "value": 41
                        },
                        "price": {
                            "unit": "Euro",
                            "value": 17.7165
                        },
                        "emission": {
                            "unit": "Gram",
                            "value": 5314.95
                        },
                        "ticketPrice": null
                    }
                },
                {
                    "url": "TripProposals/IMR/80813",
                    "origin": {
                        "location": {
                            "latitude": 52.393295,
                            "longitude": 13.074756,
                            "system": "WGS_84"
                        },
                        "address": null,
                        "time": "2014-03-27T10:30:00+0100"
                    },
                    "destination": {
                        "location": {
                            "latitude": 52.525589,
                            "longitude": 13.369539,
                            "system": "WGS_84"
                        },
                        "address": null,
                        "time": "2014-03-27T11:21:00+0100"
                    },
                    "trafficTypes": [
                        "Walk",
                        "CityTrain"
                    ],
                    "description": null,
                    "costs": {
                        "distance": {
                            "unit": "Meter",
                            "value": 28266.81343723691
                        },
                        "duration": {
                            "unit": "Minute",
                            "value": 51
                        },
                        "price": {
                            "unit": "Euro",
                            "value": 3.2
                        },
                        "emission": {
                            "unit": "Gram",
                            "value": 621.225709056449
                        },
                        "ticketPrice": {
                            "unit": "EuroCent",
                            "value": 320,
                            "operatorId": "VBB",
                            "ticketId": "00101",
                            "tariffLevel": "B3",
                            "departureZone": "5750",
                            "arrivalZone": "5555"
                        }
                    }
                }
            ]
        
### three hashes [POST]

bla bla

    + Request
        + Headers
        + Body

+ Response 200
